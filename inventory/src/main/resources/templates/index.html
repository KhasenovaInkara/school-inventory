<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>–®–∫–æ–ª—å–Ω—ã–π –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            /* 1. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ (–±–µ–∂–µ–≤–æ-—Å–µ—Ä—ã–π, –∫–∞–∫ –≤ —á–∞—Ç–∞—Ö) */
            background-color: #e4e4e4; 
            
            /* 2. –ö–∞—Ä—Ç–∏–Ω–∫–∞-–ø–∞—Ç—Ç–µ—Ä–Ω (—à–∫–æ–ª—å–Ω—ã–µ –¥—É–¥–ª—ã: –≥–ª–æ–±—É—Å, –ª–∏–Ω–µ–π–∫–∞, –∫–∞—Ä–∞–Ω–¥–∞—à) */
            background-image: url('https://img.freepik.com/free-vector/back-school-doodle-seamless-pattern_1284-558.jpg?w=740&t=st=1686000000~exp=1686000600~hmac=xyz');
            
            /* 3. –î–µ–ª–∞–µ–º —É–∑–æ—Ä –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è –∏ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º */
            background-repeat: repeat;
            background-size: 300px; /* –†–∞–∑–º–µ—Ä —Ä–∏—Å—É–Ω–∫–æ–≤ */
            background-blend-mode: overlay; /* –ú–∞–≥–∏—è: —Å–º–µ—à–∏–≤–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É —Å —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –±–ª–µ–¥–Ω–æ–π */
        }

        /* –ë–µ–ª–∞—è –ø–æ–¥–ª–æ–∂–∫–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ —Å–ª–∏–≤–∞–ª—Å—è —Å —Ñ–æ–Ω–æ–º */
        .main-card {
            background-color: rgba(255, 255, 255, 0.95); /* –ë–µ–ª—ã–π —Å –ª–µ–≥–∫–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é */
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* –ú—è–≥–∫–∞—è —Ç–µ–Ω—å */
            margin-top: 40px;
            margin-bottom: 40px;
        }

        h1 {
            color: #2c3e50;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="main-card">
        
        <h1 class="text-center mb-4">üéì –°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —à–∫–æ–ª—å–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</h1>

        <div th:if="${message}" class="alert alert-success alert-dismissible fade show">
            <strong th:text="${message}"></strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show">
            <strong th:text="${error}"></strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <div class="row mb-4 align-items-center">
            <div class="col-md-5">
                <form th:action="@{/}" method="get" class="d-flex gap-2">
                    <input type="text" name="keyword" class="form-control" 
                           placeholder="–ù–∞–π—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç..." th:value="${keyword}">
                    <button type="submit" class="btn btn-primary">üîç</button>
                    <a href="/" class="btn btn-outline-secondary">‚ùå</a>
                </form>
            </div>
            
            <div class="col-md-7 text-end">
                <a sec:authorize="hasRole('ADMIN')" href="/requests" class="btn btn-warning text-dark me-1">üîî –ó–∞—è–≤–∫–∏</a>
                <a sec:authorize="hasRole('ADMIN')" href="/borrowed" class="btn btn-primary me-1">üì¶ –í—ã–¥–∞–Ω–Ω–æ–µ</a>
                <a sec:authorize="hasRole('ADMIN')" href="/history" class="btn btn-info text-white me-1">üìú –ò—Å—Ç–æ—Ä–∏—è</a>
                
                <form th:action="@{/logout}" method="post" class="d-inline">
                    <button type="submit" class="btn btn-secondary">–í—ã—Ö–æ–¥</button>
                </form>
                
                <a sec:authorize="hasRole('ADMIN')" href="/add" class="btn btn-success ms-1">+ –î–æ–±–∞–≤–∏—Ç—å</a>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-hover table-bordered text-center align-middle">
                <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="item : ${items}">
                    <td th:text="${item.id}">1</td>
                    <td th:text="${item.title}" class="text-start fw-bold">–ü–∞—Ä—Ç–∞</td>
                    <td>
                        <span class="badge bg-secondary" th:text="${item.category}">–ú–µ–±–µ–ª—å</span>
                    </td>
                    
                    <td>
                        <span th:if="${item.quantity > 0}" class="badge bg-success" th:text="${item.quantity} + ' —à—Ç.'">10 —à—Ç.</span>
                        <span th:if="${item.quantity == 0}" class="badge bg-danger">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                    </td>

                    <td>
                        <a th:if="${item.quantity > 0}" 
                           sec:authorize="hasRole('USER')"
                           th:href="@{/request/{id}(id=${item.id})}" 
                           class="btn btn-sm btn-outline-primary">üôã‚Äç‚ôÇÔ∏è –ó–∞–ø—Ä–æ—Å–∏—Ç—å</a>
                        
                        <a sec:authorize="hasRole('ADMIN')" th:href="@{/return/{id}(id=${item.id})}" 
                           class="btn btn-sm btn-outline-secondary" title="–ë—ã—Å—Ç—Ä—ã–π –≤–æ–∑–≤—Ä–∞—Ç">+1</a>

                        <span sec:authorize="hasRole('ADMIN')" class="ms-2">
                            <a th:href="@{/edit/{id}(id=${item.id})}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                            <a th:href="@{/delete/{id}(id=${item.id})}" 
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç?');">üóëÔ∏è</a>
                        </span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        
    </div> </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>